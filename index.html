<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matriz de Eisenhower - GestÃ£o de Tarefas</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos existentes */
        .task { position: relative; padding-top: 16px; }
        .task__delete { position: absolute; top: -8px; right: -8px; background: var(--color-surface); border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--color-border); cursor: pointer; padding: 0; transition: transform 0.2s, box-shadow 0.2s; }
        .task__delete:hover { transform: scale(1.1); box-shadow: var(--shadow-md); }
        .task__delete svg { width: 18px; height: 18px; color: var(--color-error); }
        .task__details { display: flex; align-items: center; justify-content: flex-start; margin-top: 8px; flex-wrap: wrap;}
        .task__due-date { font-size: 12px; color: var(--color-text-secondary); cursor: pointer; display: flex; align-items: center; gap: 4px; padding: 2px 6px; border-radius: 4px; }
        .task__due-date:hover { background-color: var(--color-secondary); }
        .task__due-date svg { width: 16px; height: 16px; }
        .task__date-input { border: 1px solid var(--color-border); border-radius: 4px; font-family: inherit; }
        .task-input__extra-fields { margin-top: 8px; display: flex; flex-direction: column; gap: 4px;}
        .task-input__actions { margin-top: 12px; }
        .hidden { display: none; }

        /* NOVOS ESTILOS PARA SUBTAREFAS */
        .subtask-section { margin-top: 12px; border-top: 1px solid var(--color-border); padding-top: 8px; }
        .subtask-list { display: flex; flex-direction: column; gap: 4px; max-height: 150px; overflow-y: auto; padding-right: 5px; }
        .subtask-item { display: flex; align-items: center; gap: 8px; font-size: 13px; padding: 4px; border-radius: 4px; position: relative; }
        .subtask-item:hover { background-color: var(--color-secondary); }
        .subtask-item .subtask-text { flex-grow: 1; }
        .subtask-item.completed .subtask-text { text-decoration: line-through; color: var(--color-text-secondary); }
        .add-subtask-form { display: flex; margin-top: 8px; gap: 4px; }
        .add-subtask-input { flex-grow: 1; border: 1px solid var(--color-border); font-size: 12px; padding: 4px 8px; border-radius: 4px; background-color: var(--color-surface); }
        .add-subtask-btn { background: var(--color-primary); color: var(--color-btn-primary-text); border: none; border-radius: 4px; width: 24px; height: 24px; cursor: pointer; font-weight: bold; }
        .subtask-delete-btn { background: none; border: none; cursor: pointer; padding: 0; margin-left: auto; display: none; line-height: 1; }
        .subtask-item:hover .subtask-delete-btn { display: inline-block; }
        .subtask-delete-btn svg { width: 16px; height: 16px; color: var(--color-text-secondary); }
        .subtask-delete-btn:hover svg { color: var(--color-error); }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="header__title">Matriz de Eisenhower</h1>
            <div class="header__actions">
                <button class="btn btn--sm btn--secondary" id="help-btn"><span>?</span></button>
                <button class="btn btn--sm btn--secondary" id="stats-btn"><span>ðŸ“Š</span></button>
            </div>
        </div>
    </header>
    <main class="main">
        <div class="container">
            <div class="matrix" id="matrix">
                <section class="quadrant" data-quadrant="q1" style="border-color: #ef4444;">
                    <header class="quadrant__header" style="background-color: #ef4444;">
                        <h2 class="quadrant__title">Fazer Primeiro</h2>
                        <p class="quadrant__subtitle">Urgente e Importante</p>
                        <span class="quadrant__action">FAZER AGORA</span>
                    </header>
                    <div class="quadrant__content">
                        <div class="task-list" id="tasks-q1"></div>
                        <button class="add-task-btn" data-quadrant="q1"><span>+</span> <span>Adicionar Tarefa</span></button>
                    </div>
                </section>
                <section class="quadrant" data-quadrant="q2" style="border-color: #3b82f6;">
                    <header class="quadrant__header" style="background-color: #3b82f6;">
                        <h2 class="quadrant__title">Agendar</h2>
                        <p class="quadrant__subtitle">Importante mas nÃ£o Urgente</p>
                        <span class="quadrant__action">PROGRAMAR</span>
                    </header>
                    <div class="quadrant__content">
                        <div class="task-list" id="tasks-q2"></div>
                        <button class="add-task-btn" data-quadrant="q2"><span>+</span> <span>Adicionar Tarefa</span></button>
                    </div>
                </section>
                <section class="quadrant" data-quadrant="q3" style="border-color: #f59e0b;">
                    <header class="quadrant__header" style="background-color: #f59e0b;">
                        <h2 class="quadrant__title">Delegar</h2>
                        <p class="quadrant__subtitle">Urgente mas nÃ£o Importante</p>
                        <span class="quadrant__action">DELEGAR</span>
                    </header>
                    <div class="quadrant__content">
                        <div class="task-list" id="tasks-q3"></div>
                        <button class="add-task-btn" data-quadrant="q3"><span>+</span> <span>Adicionar Tarefa</span></button>
                    </div>
                </section>

                <section class="quadrant" data-quadrant="q4" style="border-color: #22c55e;">
                    <header class="quadrant__header" style="background-color: #22c55e;">
                        <h2 class="quadrant__title">Eliminar</h2>
                        <p class="quadrant__subtitle">Nem Urgente nem Importante</p>
                        <span class="quadrant__action">ELIMINAR</span>
                    </header>
                    <div class="quadrant__content">
                        <div class="task-list" id="tasks-q4"></div>
                        <button class="add-task-btn" data-quadrant="q4"><span>+</span> <span>Adicionar Tarefa</span></button>
                    </div>
                </section>
                </div>
        </div>
    </main>
    <div class="modal hidden" id="help-modal"><div class="modal__overlay"></div><div class="modal__content"><div class="modal__header"><h3>Como usar a Matriz de Eisenhower</h3><button class="modal__close" id="close-help">&times;</button></div><div class="modal__body"><div class="help-section"><h4 style="color: #ef4444;">ðŸ”´ Fazer Primeiro (Urgente e Importante)</h4><p>Tarefas crÃ­ticas que exigem aÃ§Ã£o imediata. Ex: prazos crÃ­ticos, emergÃªncias.</p></div><div class="help-section"><h4 style="color: #3b82f6;">ðŸ”µ Agendar (Importante mas nÃ£o Urgente)</h4><p>Tarefas importantes para crescimento. Ex: planejamento, desenvolvimento pessoal.</p></div><div class="help-section"><h4 style="color: #f59e0b;">ðŸŸ¡ Delegar (Urgente mas nÃ£o Importante)</h4><p>Tarefas urgentes que podem ser feitas por outros. Ex: interrupÃ§Ãµes, reuniÃµes rotineiras.</p></div><div class="help-section"><h4 style="color: #22c55e;">ðŸŸ¢ Eliminar (Nem Urgente nem Importante)</h4><p>Atividades que consomem tempo sem agregar valor. Ex: redes sociais, distraÃ§Ãµes.</p></div></div></div></div>
    <div class="modal hidden" id="stats-modal"><div class="modal__overlay"></div><div class="modal__content"><div class="modal__header"><h3>EstatÃ­sticas das Tarefas</h3><button class="modal__close" id="close-stats">&times;</button></div><div class="modal__body" id="stats-content"></div></div></div>
    <template id="task-template">
        <div class="task" draggable="true">
             <button class="task__delete" title="Excluir tarefa">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>
            </button>
            <div class="task__content">
                <input type="checkbox" class="task__checkbox">
                <span class="task__text" contenteditable="true"></span>
            </div>
            <div class="task__details">
                <div class="task__due-date" title="Clique para alterar a data"></div>
                <input type="date" class="task__date-input hidden" title="Pressione Enter ou clique fora para salvar">
            </div>
            <div class="subtask-section">
                <div class="subtask-list"></div>
                <form class="add-subtask-form">
                    <input type="text" class="add-subtask-input" placeholder="Nova subtarefa..." maxlength="100">
                    <button type="submit" class="add-subtask-btn" title="Adicionar subtarefa">+</button>
                </form>
            </div>
        </div>
    </template>
    <template id="task-input-template">
        <div class="task-input">
            <input type="text" class="task-input__field" placeholder="Digite sua tarefa..." maxlength="200">
            <div class="task-input__extra-fields">
                <label for="task-due-date-input" style="font-size: 12px; color: var(--color-text-secondary);">Data de Vencimento (Opcional):</label>
                <input type="date" class="task-input__date-field" id="task-due-date-input">
            </div>
            <div class="task-input__actions">
                <button class="btn btn--sm btn--primary task-input__save">Salvar</button>
                <button class="btn btn--sm btn--secondary task-input__cancel">Cancelar</button>
            </div>
        </div>
    </template>
    <script src="js/app.js" type="module"></script>
</body>
</html>